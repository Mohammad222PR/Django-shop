{% extends 'dashboard/admin/base.html' %}
{% load static %}

{% block breadcrumb %}
<nav aria-label="breadcrumb">
    <ol class="breadcrumb breadcrumb-light mb-0">
        <li class="breadcrumb-item">حساب</li>
        <li class="breadcrumb-item">داشبورد ادمین</li>
        <li class="breadcrumb-item active" aria-current="page">
            نمودارها
        </li>
    </ol>
</nav>
{% endblock %}

{% block content %}
<style>
    .chart-container {
        position: relative;
        margin: auto;
        height: 40vh;
        width: 80vw;
    }

    .card-header-title {
        text-align: center;
        color: #333;
        margin-bottom: 20px;
    }

    .chart-header {
        text-align: center;
        font-size: 1.5em;
        margin-top: 20px;
        margin-bottom: 20px;
    }
</style>
<div class="card">
    <h5 class="chart-header">فروش سالانه</h5>
    <div class="chart-container">
        <canvas id="myChart"></canvas>
    </div>
    
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


<script>
    const ctx = document.getElementById('myChart').getContext('2d');
    const myChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['ژانویه', 'فوریه', 'مارس', 'آوریل', 'می', 'ژوئن', 'جولای', 'آگوست', 'سپتامبر', 'اکتبر', 'نوامبر', 'دسامبر'],
            datasets: [{
                label: 'فروش ماهانه',
                data: [{{total_order_price_per_month.chart_order_1}}, {{total_order_price_per_month.chart_order_2}}, {{total_order_price_per_month.chart_order_3}}, {{total_order_price_per_month.chart_order_4}}, {{total_order_price_per_month.chart_order_5}}, {{total_order_price_per_month.chart_order_6}}, {{total_order_price_per_month.chart_order_7}}, {{total_order_price_per_month.chart_order_8}}, {{total_order_price_per_month.chart_order_9}}, {{total_order_price_per_month.chart_order_10}}, {{total_order_price_per_month.chart_order_11}}, {{total_order_price_per_month.chart_order_12}}], // این داده‌ها باید با اعداد واقعی فروش شما جایگزین شوند
                backgroundColor: 'rgba(54, 162, 235, 0.2)',
                borderColor: 'rgba(54, 162, 235, 1)',
                borderWidth: 1
            }, {
                label: 'تعداد محصولات فروخته شده',
                data: [
               {{total_products_sold_per_month.chart_order_1}} ,
               {{total_products_sold_per_month.chart_order_2}} ,
               {{total_products_sold_per_month.chart_order_3}} ,
               {{total_products_sold_per_month.chart_order_4}} ,
               {{total_products_sold_per_month.chart_order_5}} ,
               {{total_products_sold_per_month.chart_order_6}} ,
               {{total_products_sold_per_month.chart_order_7}} ,
               {{total_products_sold_per_month.chart_order_8}} ,
                {{total_products_sold_per_month.chart_order_9 }},
                {{total_products_sold_per_month.chart_order_10}} ,
                {{total_products_sold_per_month.chart_order_11}} ,
                {{total_products_sold_per_month.chart_order_12}} ,
                ], // داده‌های تعداد محصولات فروخته شده
                backgroundColor: 'rgba(255, 206, 86, 0.2)',
                borderColor: 'rgba(255, 206, 86, 1)',
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
    
</script>
   

<hr>
    <h5 class="chart-header">پیشرفت فروش</h5>
    <div class="chart-container">
        <canvas id="myProgressChart"></canvas>
    </div>
    
<script>

    const ctxProgress = document.getElementById('myProgressChart').getContext('2d');
    const myProgressChart = new Chart(ctxProgress, {
        type: 'line',
        data: {
            labels: ['ژانویه', 'فوریه', 'مارس', 'آوریل', 'می', 'ژوئن', 'جولای', 'آگوست', 'سپتامبر', 'اکتبر', 'نوامبر', 'دسامبر'],
            datasets: [{
                label: 'پیشرفت فروش ماهانه',
                data: [{{total_order_price_per_month.chart_order_1}},
                 {{total_order_price_per_month.chart_order_2}},
                  {{total_order_price_per_month.chart_order_3}},
                   {{total_order_price_per_month.chart_order_4}},
                    {{total_order_price_per_month.chart_order_5}},
                     {{total_order_price_per_month.chart_order_6}},
                      {{total_order_price_per_month.chart_order_7}},
                       {{total_order_price_per_month.chart_order_8}},
                        {{total_order_price_per_month.chart_order_9}},
                         {{total_order_price_per_month.chart_order_10}},
                          {{total_order_price_per_month.chart_order_11}},
                           {{total_order_price_per_month.chart_order_12}}
                           ], // این داده‌ها باید با اعداد واقعی فروش شما جایگزین شوند
                backgroundColor: 'rgba(54, 162, 235, 0.2)',
                borderColor: 'rgba(54, 162, 235, 1)',
                borderWidth: 2,
                fill: false
            }, {
                label: 'تعداد محصولات فروخته شده',
                data: [
                {{total_products_sold_per_month.chart_order_1}} ,
                 {{total_products_sold_per_month.chart_order_2}} ,
                  {{total_products_sold_per_month.chart_order_3}} ,
                   {{total_products_sold_per_month.chart_order_4}} ,
                    {{total_products_sold_per_month.chart_order_5}} ,
                     {{total_products_sold_per_month.chart_order_6}} ,
                      {{total_products_sold_per_month.chart_order_7}} ,
                       {{total_products_sold_per_month.chart_order_8}} ,
                        {{total_products_sold_per_month.chart_order_9 }},
                         {{total_products_sold_per_month.chart_order_10}} ,
                          {{total_products_sold_per_month.chart_order_11}} ,
                           {{total_products_sold_per_month.chart_order_12}} ,
                 ],                backgroundColor: 'rgba(255, 159, 64, 0.2)',
                borderColor: 'rgba(255, 159, 64, 1)',
                borderWidth: 2,
                fill: false
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
    
</script>


<hr>
    <h5 class="chart-header"> محبوب ترین محصولات</h5>
    <div class="chart-container">
        <canvas id="myDoughnutChart"></canvas>
    </div>
   
   <script>

    const labels = [];
          const dataPoints = [];
          const backgroundColors = [
              'rgba(255, 99, 132, 0.7)',
              'rgba(54, 162, 235, 0.7)',
              'rgba(255, 206, 86, 0.7)',
              'rgba(75, 192, 192, 0.7)',
              'rgba(153, 102, 255, 0.7)'
          ];
          
          {% for item in famous_products.all %}
              labels.push('{{ item.title }}');
              dataPoints.push({{ item.famous_percent }});
          {% endfor %}
          
          const data = {
              labels: labels,
              datasets: [{
                  label: 'محبوبیت محصول',
                  data: dataPoints,
                  backgroundColor: backgroundColors,
                  hoverOffset: 4
              }]
          };
          
          const config = {
              type: 'doughnut',
              data: data,
              options: {
                  responsive: true,
                  plugins: {
                      legend: {
                          position: 'top',
                      },
                      title: {
                          display: true,
                          text: 'محبوبیت محصولات'
                      }
                  }
              },
          };
          
          const myDoughnutChart = new Chart(
              document.getElementById('myDoughnutChart'),
              config
          );
          
  </script>
  <hr>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<div class="card">
    <h5 class="chart-header">عضویت کاربران</h5>
    <div class="chart-container">
        <canvas id="daMyChart"></canvas>
    </div>
    <script>
        const ctx1 = document.getElementById('daMyChart').getContext('2d');
        const daMyChart = new Chart(ctx1, {
            type: 'bar',
            data: {
                labels: ['ژانویه', 'فوریه', 'مارس', 'آوریل', 'می', 'ژوئن', 'جولای', 'آگوست', 'سپتامبر', 'اکتبر', 'نوامبر', 'دسامبر'],
                datasets: [{
                    label: 'کاربران عضو شده',
                    data: [
                    {{total_user_created_account.chart_user_1}},
                    {{total_user_created_account.chart_user_2}},
                    {{total_user_created_account.chart_user_3}},
                    {{total_user_created_account.chart_user_4}},
                    {{total_user_created_account.chart_user_8}},
                    {{total_user_created_account.chart_user_5}},
                    {{total_user_created_account.chart_user_6}},
                    {{total_user_created_account.chart_user_7}},
                    {{total_user_created_account.chart_user_9}},
                    {{total_user_created_account.chart_user_10}},
                    {{total_user_created_account.chart_user_11}},
                    {{total_user_created_account.chart_user_12}},
                    ],     
                    backgroundColor: 'rgba(54, 162, 235, 0.2)',

                    borderColor: [
                        'rgba(54, 162, 235, 1)',
                        // ... دیگر رنگ‌ها
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    </script>
</div>

</div>

{% endblock %}
